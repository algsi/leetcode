# 翻转矩阵后的得分

## 贪心算法

不难发现一点，能够知道一个重要的事实：为了得到更高的分数，矩阵的每一行的最左边的数都必须为 1。为了做到这一点，我们可以翻转那些最左边不为 1 的行，而其他的行保持不动。

当将每一行的最左边的数都变为 1 之后，就只能进行列翻转了。为了使总得分最大，我们要让每一列中的 1 的数目尽可能地多。因此，我们扫描除了最左边的列以外的每一列。如果该列 0 的数目多于 1 的数目，就翻转该列，其他的列保持不变。

实际编写代码时，我们无需修改原矩阵，而是可以计算每一列对总分数的「贡献」，从而直接计算出最高的分数。假设矩阵共有 m 行 n 列，计算方法如下：

- 对于最左边的列而言，由于最优情况下，它们的取值都为 1，因此每个元素对分数的贡献都为 $2^{n-1}$，总贡献为 $m \times 2^{n-1}$。
- 对于第 j 列（j > 0，此处规定最左边列是 0 列）而言，我统计这一列 0 和 1 的数量，令其中的最大值为 k，则 k 是列翻转后 1 的数量，该列的总贡献为 $k \times 2^{n-j-1}$。需要注意的是，在统计 0 和 1 的数量的时候，**要考虑最初进行的行反转**。

